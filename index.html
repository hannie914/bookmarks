<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>트윗 보관함 — 미리보기 + 검색/태그 + 동기화 + 페이징</title>
<script async src="https://platform.twitter.com/widgets.js"></script>
<style>
  :root {
    --bg:#fff; --fg:#1b1f23; --muted:#6a737d; --card:#fff; --border:#eaecef; --chip:#f1f8ff; --chip-fg:#0366d6; --accent:#0366d6;
  }
  [data-theme="dark"] {
    --bg:#0d1117; --fg:#c9d1d9; --muted:#8b949e; --card:#161b22; --border:#30363d; --chip:#13233a; --chip-fg:#58a6ff; --accent:#58a6ff;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;background:var(--bg);color:var(--fg)}
  header{position:sticky;top:0;z-index:20;backdrop-filter:blur(8px);background:color-mix(in oklab,var(--bg) 92%,transparent);border-bottom:1px solid var(--border)}
  .wrap{max-width:1120px;margin:0 auto;padding:16px}
  .row{display:grid;grid-template-columns:2fr 1fr;gap:16px}
  @media (max-width:860px){.row{grid-template-columns:1fr}}
  h1{margin:0 0 8px;font-size:18px}
  .sub{font-size:12px;color:var(--muted)}
  textarea,input,select{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg)}
  button{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg);cursor:pointer}
  button:hover{filter:brightness(1.03)}
  .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .count{margin-left:auto}
  .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .chip{background:var(--chip);color:var(--chip-fg);border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer}
  .chip.active{outline:2px solid var(--chip-fg)}
  main .wrap{padding-top:8px}
  #grid{display:grid;gap:16px;margin:16px 0 40px;grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}
  .card{border:1px solid var(--border);border-radius:14px;background:var(--card);padding:12px;display:flex;flex-direction:column;gap:8px}
  .meta{display:flex;gap:8px;flex-wrap:wrap;align-items:center;font-size:12px;color:var(--muted)}
  .line{display:flex;gap:8px;align-items:center}
  .line input{flex:1}
  .footer{display:flex;gap:8px;align-items:center;justify-content:space-between}
  .link{font-size:12px;color:var(--muted);text-decoration:none;word-break:break-all}
  .switch{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)}
  .kbd{border:1px solid var(--border);border-bottom-width:2px;border-radius:6px;padding:2px 6px;font-family:ui-monospace,monospace}
  [data-theme="dark"] .twitter-tweet-rendered{filter:brightness(0.92)}
  /* 설정 모달 */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;z-index:50}
  .modal{background:var(--card);border:1px solid var(--border);border-radius:12px;max-width:520px;width:92%;padding:16px}
  .modal h2{margin:0 0 8px;font-size:16px}
  .modal .desc{font-size:12px;color:var(--muted);margin-bottom:8px}
  .modal .row{grid-template-columns:1fr}
  /* 페이징 바 */
  .pagingbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end;margin-top:8px}
  .pagingbar .muted{white-space:nowrap}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>트윗 보관함 <span class="sub">미리보기 + 검색/태그 + <b>클라우드 동기화</b> + <b>페이징</b></span></h1>
    <div class="row">
      <div>
        <div class="sub">한 줄에 하나씩 <b>트윗 URL</b>. 같은 줄에 <code>#태그</code>와 <code>| 메모</code>를 적어도 됩니다.</div>
        <textarea id="bulk" placeholder="예)
https://twitter.com/nasa/status/123... #우주 #사진 | 허블 텍스트
https://x.com/someone/status/456... #정책 | 개인 메모"></textarea>
        <div class="controls" style="margin-top:8px">
          <button id="importBtn">가져오기</button>
          <button id="clearInput">입력창 비우기</button>
          <button id="syncSettings">동기화 설정</button>
          <span class="sub">중복 URL은 자동 건너뜁니다.</span>
        </div>
      </div>
      <div>
        <div class="sub">검색( URL / #태그 / 메모 )</div>
        <input id="q" placeholder="#우주 또는 메모 단어 등" />
        <div class="controls" style="margin-top:8px">
          <div class="switch">
            <input type="checkbox" id="darkToggle" />
            <label for="darkToggle">다크모드</label>
          </div>
          <span class="count sub" id="count"></span>
        </div>
        <div class="controls" style="margin-top:6px">
          <button id="cloudPull">클라우드에서 불러오기</button>
          <button id="cloudPush">클라우드로 업로드</button>
          <button id="exportBtn">백업 내보내기(JSON)</button>
          <button id="importJsonBtn">백업 불러오기</button>
          <input type="file" id="fileInput" accept="app
